"use strict";angular.module("DataAccessApp").controller("baseController",["$scope","$loading","$state","SweetAlert","$localStorage",function(n,t,i,r,u){n.options&&(n.grid={},n.gridOptions={dataSource:{type:"json",transport:{read:{async:!0,type:"POST",url:n.options.grid.getDataUrl,dataType:"json",beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+u.authorizationData.token)}},error:function(n){var t=jQuery.parseJSON(n.responseText);alert("An error has occured: "+t.Message)}},filter:n.options.grid.dataSource?n.options.grid.dataSource.filter:[],batch:!0,pageSize:10,serverPaging:!0,serverSorting:!0,serverFiltering:!0,sortable:{mode:"multiple"},schema:{model:n.options.grid.model,data:"Data",total:"Total"},error:function(n){alert(n.xhr.responseText)}},sortable:!0,resizable:!0,scrollable:!1,editable:!1,pageable:{buttonCount:5,pageSizes:[5,10,20,50,100],refresh:!0},filterable:{extra:!1},dataBound:function(){this.expandRow(this.tbody.find("tr.k-master-row").first())},noRecords:{template:"No items to display"},columns:n.options.grid.columns},n.showEdit=function(t){i.go(n.options.editState,{id:t})},n.showCreate=function(){i.go(n.options.createState)},n.showDelete=function(t){r.swal({title:"Are you sure?",text:n.options.delete.Text,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:n.options.delete.ConfirmButtonText,closeOnConfirm:!1},function(i){i&&n.delete(t)})},n.delete=function(t){n.beforeDelete();n.deleteOnServer(t).success(function(t){n.afterDelete(t)}).error(function(t){n.deleteErrorHeandle(t)}).finally(function(){})},n.beforeDelete=function(){},n.deleteOnServer=function(t){return n.options.delete.ServiceMethod(t)},n.afterDelete=function(){r.swal("Deleted!","Deleted Success","success");n.grid.dataSource.read()},n.deleteErrorHeandle=function(n){r.swal("Filed!","Deleted Filed","warning");console.log(n.ExceptionMessage)})}]);
