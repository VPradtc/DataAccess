"use strict";angular.module("DataAccessApp").controller("baseEditController",["$scope","$loading","$state",function(n,t,i){n.options&&(n.init=function(){if(i&&i.params&&i.current&&i.current.mode){n.mode=i.current.mode;switch(i.current.mode){case"edit":n.editInit();break;case"create":n.createInit();break;default:console.log("Not found mode")}}},n.editInit=function(){t.start("main");i.params&&i.params.id||console.log("Not found id");n.options.getById(i.params.id).success(function(t){n.afterEditInit(t)}).error(function(t){n.getByIdErrorHeandle(t)}).finally(function(){t.stop("main")})},n.afterEditInit=function(t){n.entity=t},n.getByIdErrorHeandle=function(n){alert(n.ExceptionMessage)},n.createInit=function(){if(n.entity={},n.options.onCreate)n.options.onCreate(n.entity)},n.save=function(){switch(i.current.mode){case"edit":n.edit();break;case"create":n.create();break;default:console.log("Not found mode")}},n.edit=function(){n.beforeEdit();n.editOnServer(n.entity).success(function(t){n.afterEdit(t)}).error(function(t){n.editErrorHeandle(t)}).finally(function(){t.stop("main")})},n.beforeEdit=function(){t.start("main")},n.editOnServer=function(t){return n.options.editServiceMethod(t)},n.afterEdit=function(){i.go(n.options.backState,{reload:!0})},n.editErrorHeandle=function(n){alert(n.ExceptionMessage)},n.create=function(){n.beforeCreate();n.createOnServer(n.entity).success(function(t){n.afterCreate(t)}).error(function(t){n.createErrorHeandle(t)}).finally(function(){t.stop("main")})},n.beforeCreate=function(){t.start("main")},n.createOnServer=function(t){return n.options.createServiceMethod(t)},n.afterCreate=function(){i.go(n.options.backState)},n.createErrorHeandle=function(n){alert(n.ExceptionMessage)},n.cancel=function(){i.go(n.options.backState)},n.init())}]);
